[English](./README.md) | [PortuguÃªs](./README.pt.md) | [ä¸­æ–‡](./README.zh.md)

# ğŸ¦¥ Sloth Runner ğŸš€

ä¸€ä¸ªç”¨ Go ç¼–å†™ã€ç”± Lua è„šæœ¬é©±åŠ¨çš„çµæ´»ä¸”å¯æ‰©å±•çš„ä»»åŠ¡è¿è¡Œå™¨åº”ç”¨ç¨‹åºã€‚`sloth-runner` å…è®¸æ‚¨é€šè¿‡ç®€å•çš„ Lua è„šæœ¬å®šä¹‰å¤æ‚çš„å·¥ä½œæµã€ç®¡ç†ä»»åŠ¡ä¾èµ–å…³ç³»ä»¥åŠä¸å¤–éƒ¨ç³»ç»Ÿé›†æˆã€‚

[![Go CI](https://github.com/chalkan3/sloth-runner/actions/workflows/go.yml/badge.svg)](https://github.com/chalkan3/sloth-runner/actions/workflows/go.yml)

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

*   **ğŸ“œ Lua è„šæœ¬:** ä½¿ç”¨å¼ºå¤§è€Œçµæ´»çš„ Lua è„šæœ¬å®šä¹‰ä»»åŠ¡å’Œå·¥ä½œæµã€‚
*   **ğŸ”— ä¾èµ–ç®¡ç†:** æŒ‡å®šä»»åŠ¡ä¾èµ–å…³ç³»ï¼Œç¡®ä¿å¤æ‚ç®¡é“çš„æœ‰åºæ‰§è¡Œã€‚
*   **âš¡ å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œ:** å¹¶å‘è¿è¡Œä»»åŠ¡ä»¥æé«˜æ€§èƒ½ã€‚
*   **ğŸª æ‰§è¡Œå‰åé’©å­:** å®šä¹‰è‡ªå®šä¹‰ Lua å‡½æ•°ï¼Œåœ¨ä»»åŠ¡å‘½ä»¤ä¹‹å‰å’Œä¹‹åè¿è¡Œã€‚
*   **âš™ï¸ ä¸°å¯Œçš„ Lua API:** ç›´æ¥ä» Lua ä»»åŠ¡è®¿é—®ç³»ç»ŸåŠŸèƒ½ï¼š
    *   **`exec` æ¨¡å—:** æ‰§è¡Œ shell å‘½ä»¤ã€‚
    *   **`fs` æ¨¡å—:** æ‰§è¡Œæ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼ˆè¯»ã€å†™ã€è¿½åŠ ã€æ£€æŸ¥å­˜åœ¨ã€åˆ›å»ºç›®å½•ã€åˆ é™¤ã€é€’å½’åˆ é™¤ã€åˆ—å‡ºï¼‰ã€‚
    *   **`net` æ¨¡å—:** å‘å‡º HTTP è¯·æ±‚ï¼ˆGETã€POSTï¼‰å’Œä¸‹è½½æ–‡ä»¶ã€‚
    *   **`data` æ¨¡å—:** è§£æå’Œåºåˆ—åŒ– JSON å’Œ YAML æ•°æ®ã€‚
    *   **`log` æ¨¡å—:** ä»¥ä¸åŒçš„ä¸¥é‡çº§åˆ«ï¼ˆinfoã€warnã€errorã€debugï¼‰è®°å½•æ¶ˆæ¯ã€‚
    *   **`salt` æ¨¡å—:** ç›´æ¥æ‰§è¡Œ SaltStack å‘½ä»¤ï¼ˆ`salt`ã€`salt-call`ï¼‰ã€‚
    *   **`gcp` æ¨¡å—:** æ‰§è¡Œè°·æ­Œäº‘ (`gcloud`) å‘½ä»¤è¡ŒæŒ‡ä»¤ã€‚
*   **â° ä»»åŠ¡è°ƒåº¦å™¨:** ä½¿ç”¨ cron è¯­æ³•è‡ªåŠ¨æ‰§è¡Œæ‚¨çš„ Lua ä»»åŠ¡ï¼Œä½œä¸ºæŒä¹…çš„åå°è¿›ç¨‹è¿è¡Œã€‚
*   **ğŸ“¦ ä»»åŠ¡äº§ç‰©ç®¡ç†:** è‡ªåŠ¨æ”¶é›†å’Œå­˜å‚¨ä»»åŠ¡ç”Ÿæˆçš„æ–‡ä»¶å’Œç›®å½•ï¼Œç”¨äºå®¡è®¡å’Œé‡ç”¨ã€‚
*   **ğŸ“ `values.yaml` é›†æˆ:** é€šè¿‡ `values.yaml` æ–‡ä»¶å°†é…ç½®å€¼ä¼ é€’ç»™æ‚¨çš„ Lua ä»»åŠ¡ï¼Œç±»ä¼¼äº Helmã€‚
*   **ğŸ’» å‘½ä»¤è¡Œç•Œé¢ (CLI):**
    *   `run`: ä» Lua é…ç½®æ–‡ä»¶æ‰§è¡Œä»»åŠ¡ã€‚
    *   `list`: åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ä»»åŠ¡ç»„å’Œä»»åŠ¡åŠå…¶æè¿°å’Œä¾èµ–å…³ç³»ã€‚
    *   `validate`: éªŒè¯ Lua ä»»åŠ¡æ–‡ä»¶çš„è¯­æ³•å’Œç»“æ„ã€‚
    *   `test`: æ‰§è¡Œä»»åŠ¡å·¥ä½œæµçš„ Lua æµ‹è¯•æ–‡ä»¶ã€‚
    *   `repl`: å¯åŠ¨äº¤äº’å¼ REPL ä¼šè¯ã€‚
    *   `version`: æ‰“å° sloth-runner çš„ç‰ˆæœ¬å·ã€‚
    *   `scheduler`: ç®¡ç†åå°ä»»åŠ¡è°ƒåº¦å™¨ï¼ŒåŒ…æ‹¬å¯ç”¨ã€ç¦ç”¨ã€åˆ—å‡ºå’Œåˆ é™¤è°ƒåº¦ä»»åŠ¡ã€‚
    *   `template list`: åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ¨¡æ¿ã€‚
    *   `new`: ä»æ¨¡æ¿ç”Ÿæˆæ–°çš„ä»»åŠ¡å®šä¹‰æ–‡ä»¶ã€‚
    *   `check dependencies`: æ£€æŸ¥æ‰€éœ€çš„å¤–éƒ¨ CLI å·¥å…·ã€‚

## ğŸ“š å®Œæ•´æ–‡æ¡£

è¦è·å–æ›´è¯¦ç»†çš„æ–‡æ¡£ã€ä½¿ç”¨æŒ‡å—å’Œé«˜çº§ç¤ºä¾‹ï¼Œè¯·è®¿é—®æˆ‘ä»¬çš„[å®Œæ•´æ–‡æ¡£](./docs/zh/index.md)ã€‚

---

## ğŸš€ å¼€å§‹ä½¿ç”¨

### å®‰è£…

è¦åœ¨æ‚¨çš„ç³»ç»Ÿä¸Šå®‰è£… `sloth-runner`ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æä¾›çš„ `install.sh` è„šæœ¬ã€‚è¯¥è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹æ‚¨çš„æ“ä½œç³»ç»Ÿå’Œæ¶æ„ï¼Œä» GitHub ä¸‹è½½æœ€æ–°çš„å‘å¸ƒç‰ˆæœ¬ï¼Œå¹¶å°† `sloth-runner` å¯æ‰§è¡Œæ–‡ä»¶æ”¾ç½®åœ¨ `/usr/local/bin` ä¸­ã€‚

```bash
bash <(curl -sL https://raw.githubusercontent.com/chalkan3/sloth-runner/master/install.sh)
```

**æ³¨æ„:** `install.sh` è„šæœ¬éœ€è¦ `sudo` æƒé™æ‰èƒ½å°†å¯æ‰§è¡Œæ–‡ä»¶ç§»åŠ¨åˆ° `/usr/local/bin`ã€‚

### åŸºæœ¬ç”¨æ³•

è¦è¿è¡Œä¸€ä¸ª Lua ä»»åŠ¡æ–‡ä»¶ï¼š

```bash
sloth-runner run -f examples/basic_pipeline.lua
```

è¦åˆ—å‡ºæ–‡ä»¶ä¸­çš„ä»»åŠ¡ï¼š

```bash
sloth-runner list -f examples/basic_pipeline.lua
```

---

## ğŸ“œ åœ¨ Lua ä¸­å®šä¹‰ä»»åŠ¡

ä»»åŠ¡åœ¨ Lua æ–‡ä»¶ä¸­å®šä¹‰ï¼Œé€šå¸¸åœ¨ä¸€ä¸ª `TaskDefinitions` è¡¨ä¸­ã€‚æ¯ä¸ªä»»åŠ¡å¯ä»¥æœ‰ `name`ã€`description`ã€`command`ï¼ˆshell å‘½ä»¤å­—ç¬¦ä¸²æˆ– Lua å‡½æ•°ï¼‰ã€`async`ï¼ˆå¸ƒå°”å€¼ï¼‰ã€`pre_exec`ï¼ˆLua å‡½æ•°é’©å­ï¼‰ã€`post_exec`ï¼ˆLua å‡½æ•°é’©å­ï¼‰å’Œ `depends_on`ï¼ˆå­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²è¡¨ï¼‰ã€‚

ç¤ºä¾‹ (`examples/basic_pipeline.lua`):

```lua
-- ä»å¦ä¸€ä¸ªæ–‡ä»¶å¯¼å…¥å¯é‡ç”¨çš„ä»»åŠ¡ã€‚è·¯å¾„æ˜¯ç›¸å¯¹çš„ã€‚
local docker_tasks = import("examples/shared/docker.lua")

TaskDefinitions = {
    full_pipeline_demo = {
        description = "ä¸€ä¸ªæ¼”ç¤ºå„ç§åŠŸèƒ½çš„ç»¼åˆç®¡é“ã€‚",
        tasks = {
            -- ä»»åŠ¡ 1: è·å–æ•°æ®ï¼Œå¼‚æ­¥è¿è¡Œã€‚
            fetch_data = {
                name = "fetch_data",
                description = "ä» API è·å–åŸå§‹æ•°æ®ã€‚",
                async = true,
                command = function(params)
                    log.info("æ­£åœ¨è·å–æ•°æ®...")
                    -- æ¨¡æ‹Ÿ API è°ƒç”¨
                    return true, "echo 'è·å–äº†åŸå§‹æ•°æ®'", { raw_data = "api_data" }
                end,
            },

            -- ä»»åŠ¡ 2: ä¸€ä¸ªä¸ç¨³å®šçš„ä»»åŠ¡ï¼Œå¤±è´¥æ—¶ä¼šé‡è¯•ã€‚
            flaky_task = {
                name = "flaky_task",
                description = "è¿™ä¸ªä»»åŠ¡ä¼šé—´æ­‡æ€§å¤±è´¥ï¼Œå¹¶ä¸”ä¼šé‡è¯•ã€‚",
                retries = 3,
                command = function()
                    if math.random() > 0.5 then
                        log.info("ä¸ç¨³å®šçš„ä»»åŠ¡æˆåŠŸã€‚")
                        return true, "echo 'æˆåŠŸ!'"
                    else
                        log.error("ä¸ç¨³å®šçš„ä»»åŠ¡å¤±è´¥ï¼Œå°†é‡è¯•...")
                        return false, "éšæœºå¤±è´¥"
                    end
                end,
            },

            -- ä»»åŠ¡ 3: å¤„ç†æ•°æ®ï¼Œä¾èµ–äº fetch_data å’Œ flaky_task çš„æˆåŠŸå®Œæˆã€‚
            process_data = {
                name = "process_data",
                description = "å¤„ç†è·å–çš„æ•°æ®ã€‚",
                depends_on = { "fetch_data", "flaky_task" },
                command = function(params, deps)
                    local raw_data = deps.fetch_data.raw_data
                    log.info("æ­£åœ¨å¤„ç†æ•°æ®: " .. raw_data)
                    return true, "echo 'å¤„ç†äº†æ•°æ®'", { processed_data = "processed_" .. raw_data }
                end,
            },

            -- ä»»åŠ¡ 4: ä¸€ä¸ªå¸¦è¶…æ—¶çš„é•¿æ—¶é—´è¿è¡Œä»»åŠ¡ã€‚
            long_running_task = {
                name = "long_running_task",
                description = "ä¸€ä¸ªå¦‚æœè¿è¡Œæ—¶é—´è¿‡é•¿å°†è¢«ç»ˆæ­¢çš„ä»»åŠ¡ã€‚",
                timeout = "5s",
                command = "echo 'å¼€å§‹é•¿ä»»åŠ¡...'; sleep 10; echo 'è¿™ä¸ä¼šè¢«æ‰“å°å‡ºæ¥ã€‚';",
            },

            -- ä»»åŠ¡ 5: ä¸€ä¸ªæ¸…ç†ä»»åŠ¡ï¼Œå¦‚æœ long_running_task å¤±è´¥åˆ™è¿è¡Œã€‚
            cleanup_on_fail = {
                name = "cleanup_on_fail",
                description = "ä»…åœ¨é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡å¤±è´¥æ—¶è¿è¡Œã€‚",
                next_if_fail = "long_running_task",
                command = "echo 'ç”±äºå…ˆå‰çš„å¤±è´¥ï¼Œæ¸…ç†ä»»åŠ¡å·²æ‰§è¡Œã€‚'",
            },

            -- ä»»åŠ¡ 6: ä½¿ç”¨ä»å¯¼å…¥çš„ docker.lua æ¨¡å—ä¸­å¯é‡ç”¨çš„ä»»åŠ¡ã€‚
            build_image = {
                uses = docker_tasks.build,
                description = "æ„å»ºåº”ç”¨ç¨‹åºçš„ Docker é•œåƒã€‚",
                params = {
                    image_name = "my-awesome-app",
                    tag = "v1.2.3",
                    context = "./app_context"
                }
            },

            -- ä»»åŠ¡ 7: ä¸€ä¸ªæ¡ä»¶ä»»åŠ¡ï¼Œä»…åœ¨æ–‡ä»¶å­˜åœ¨æ—¶è¿è¡Œã€‚
            conditional_deploy = {
                name = "conditional_deploy",
                description = "ä»…åœ¨æ„å»ºäº§ç‰©å­˜åœ¨æ—¶éƒ¨ç½²åº”ç”¨ç¨‹åºã€‚",
                depends_on = "build_image",
                run_if = "test -f ./app_context/artifact.txt", -- Shell å‘½ä»¤æ¡ä»¶
                command = "echo 'æ­£åœ¨éƒ¨ç½²åº”ç”¨ç¨‹åº...'",
            },

            -- ä»»åŠ¡ 8: å¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œæ­¤ä»»åŠ¡å°†ä¸­æ­¢æ•´ä¸ªå·¥ä½œæµã€‚
            gatekeeper_check = {
                name = "gatekeeper_check",
                description = "å¦‚æœå…³é”®æ¡ä»¶æœªæ»¡è¶³ï¼Œåˆ™ä¸­æ­¢å·¥ä½œæµã€‚",
                abort_if = function(params, deps)
                    -- Lua å‡½æ•°æ¡ä»¶
                    log.warn("æ­£åœ¨æ£€æŸ¥å®ˆé—¨å‘˜æ¡ä»¶...")
                    if params.force_proceed ~= "true" then
                        log.error("å®ˆé—¨å‘˜æ£€æŸ¥å¤±è´¥ã€‚æ­£åœ¨ä¸­æ­¢å·¥ä½œæµã€‚")
                        return true -- ä¸­æ­¢
                    end
                    return false -- ä¸ä¸­æ­¢
                end,
                command = "echo 'å¦‚æœä¸­æ­¢ï¼Œæ­¤å‘½ä»¤å°†ä¸ä¼šè¿è¡Œã€‚'"
            }
        }
    }
}
```

---

## ğŸ“„ æ¨¡æ¿

`sloth-runner` æä¾›äº†å‡ ä¸ªæ¨¡æ¿ï¼Œå¯ä»¥å¿«é€Ÿæ­å»ºæ–°çš„ä»»åŠ¡å®šä¹‰æ–‡ä»¶ã€‚

| æ¨¡æ¿åç§°           | æè¿°                                                                    |
| :----------------- | :----------------------------------------------------------------------------- |
| `simple`           | ç”Ÿæˆä¸€ä¸ªåŒ…å«â€œhello worldâ€ä»»åŠ¡çš„å•ä¸€ç»„ã€‚éå¸¸é€‚åˆå…¥é—¨ã€‚                     |
| `python`           | åˆ›å»ºä¸€ä¸ªç”¨äºè®¾ç½® Python ç¯å¢ƒã€å®‰è£…ä¾èµ–é¡¹å’Œè¿è¡Œè„šæœ¬çš„ç®¡é“ã€‚                 |
| `parallel`         | æ¼”ç¤ºå¦‚ä½•å¹¶å‘è¿è¡Œå¤šä¸ªä»»åŠ¡ã€‚                                                  |
| `python-pulumi`    | ä½¿ç”¨ Python ç®¡ç†çš„ Pulumi åŸºç¡€è®¾æ–½éƒ¨ç½²ç®¡é“ã€‚                                |
| `python-pulumi-salt` | ä½¿ç”¨ Pulumi é¢„ç½®åŸºç¡€è®¾æ–½å¹¶ä½¿ç”¨ SaltStack è¿›è¡Œé…ç½®ã€‚                       |
| `git-python-pulumi` | CI/CD ç®¡é“ï¼šå…‹éš†ä»“åº“ï¼Œè®¾ç½®ç¯å¢ƒï¼Œå¹¶ä½¿ç”¨ Pulumi è¿›è¡Œéƒ¨ç½²ã€‚                   |
| `dummy`            | ç”Ÿæˆä¸€ä¸ªä»€ä¹ˆéƒ½ä¸åšçš„è™šæ‹Ÿä»»åŠ¡ã€‚                                              |

---

## ğŸ’» CLI å‘½ä»¤

`sloth-runner` æä¾›äº†ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„å‘½ä»¤è¡Œç•Œé¢ã€‚

### `sloth-runner run`

æ‰§è¡Œåœ¨ Lua æ¨¡æ¿æ–‡ä»¶ä¸­å®šä¹‰çš„ä»»åŠ¡ã€‚

**ç”¨æ³•:** `sloth-runner run [flags]`

**æè¿°:**
`run` å‘½ä»¤æ‰§è¡Œåœ¨ Lua æ¨¡æ¿æ–‡ä»¶ä¸­å®šä¹‰çš„ä»»åŠ¡ã€‚
æ‚¨å¯ä»¥æŒ‡å®šæ–‡ä»¶ã€ç¯å¢ƒå˜é‡ï¼Œå¹¶é’ˆå¯¹ç‰¹å®šçš„ä»»åŠ¡æˆ–ä»»åŠ¡ç»„ã€‚

**æ ‡å¿—:**

*   `-f, --file string`: Lua ä»»åŠ¡é…ç½®æ–‡ä»¶è·¯å¾„ (é»˜è®¤: "examples/basic_pipeline.lua")
*   `-e, --env string`: ä»»åŠ¡ç¯å¢ƒ (ä¾‹å¦‚: Development, Production) (é»˜è®¤: "Development")
*   `-p, --prod`: è®¾ç½®ä¸º true è¡¨ç¤ºç”Ÿäº§ç¯å¢ƒ (é»˜è®¤: false)
*   `--shards string`: åˆ†ç‰‡ç¼–å·çš„é€—å·åˆ†éš”åˆ—è¡¨ (ä¾‹å¦‚: 1,2,3) (é»˜è®¤: "1,2,3")
*   `-t, --tasks string`: è¦è¿è¡Œçš„ç‰¹å®šä»»åŠ¡çš„é€—å·åˆ†éš”åˆ—è¡¨ (ä¾‹å¦‚: task1,task2)
*   `-g, --group string`: ä»…è¿è¡Œç‰¹å®šä»»åŠ¡ç»„ä¸­çš„ä»»åŠ¡
*   `-v, --values string`: åŒ…å«è¦ä¼ é€’ç»™ Lua ä»»åŠ¡çš„å€¼çš„ YAML æ–‡ä»¶è·¯å¾„
*   `-d, --dry-run`: æ¨¡æ‹Ÿä»»åŠ¡æ‰§è¡Œè€Œä¸å®é™…è¿è¡Œå®ƒä»¬ (é»˜è®¤: false)
*   `--return`: ä»¥ JSON æ ¼å¼è¿”å›ç›®æ ‡ä»»åŠ¡çš„è¾“å‡º (é»˜è®¤: false)
*   `-y, --yes`: ç»•è¿‡äº¤äº’å¼ä»»åŠ¡é€‰æ‹©å¹¶è¿è¡Œæ‰€æœ‰ä»»åŠ¡ (é»˜è®¤: false)

### `sloth-runner list`

åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ä»»åŠ¡ç»„å’Œä»»åŠ¡ã€‚

**ç”¨æ³•:** `sloth-runner list [flags]`

**æè¿°:**
`list` å‘½ä»¤æ˜¾ç¤ºæ‰€æœ‰ä»»åŠ¡ç»„åŠå…¶å„è‡ªçš„ä»»åŠ¡ï¼Œä»¥åŠå®ƒä»¬çš„æè¿°å’Œä¾èµ–å…³ç³»ã€‚

**æ ‡å¿—:**

*   `-f, --file string`: Lua ä»»åŠ¡é…ç½®æ–‡ä»¶è·¯å¾„ (é»˜è®¤: "examples/basic_pipeline.lua")
*   `-e, --env string`: ä»»åŠ¡ç¯å¢ƒ (ä¾‹å¦‚: Development, Production) (é»˜è®¤: "Development")
*   `-p, --prod`: è®¾ç½®ä¸º true è¡¨ç¤ºç”Ÿäº§ç¯å¢ƒ (é»˜è®¤: false)
*   `--shards string`: åˆ†ç‰‡ç¼–å·çš„é€—å·åˆ†éš”åˆ—è¡¨ (ä¾‹å¦‚: 1,2,3) (é»˜è®¤: "1,2,3")
*   `-v, --values string`: åŒ…å«è¦ä¼ é€’ç»™ Lua ä»»åŠ¡çš„å€¼çš„ YAML æ–‡ä»¶è·¯å¾„

### `sloth-runner validate`

éªŒè¯ Lua ä»»åŠ¡æ–‡ä»¶çš„è¯­æ³•å’Œç»“æ„ã€‚

**ç”¨æ³•:** `sloth-runner validate [flags]`

**æè¿°:**
`validate` å‘½ä»¤æ£€æŸ¥ Lua ä»»åŠ¡æ–‡ä»¶çš„è¯­æ³•é”™è¯¯ï¼Œå¹¶ç¡®ä¿ `TaskDefinitions` è¡¨ç»“æ„æ­£ç¡®ã€‚

**æ ‡å¿—:**

*   `-f, --file string`: Lua ä»»åŠ¡é…ç½®æ–‡ä»¶è·¯å¾„ (é»˜è®¤: "examples/basic_pipeline.lua")
*   `-e, --env string`: ä»»åŠ¡ç¯å¢ƒ (ä¾‹å¦‚: Development, Production) (é»˜è®¤: "Development")
*   `-p, --prod`: è®¾ç½®ä¸º true è¡¨ç¤ºç”Ÿäº§ç¯å¢ƒ (é»˜è®¤: false)
*   `--shards string`: åˆ†ç‰‡ç¼–å·çš„é€—å·åˆ†éš”åˆ—è¡¨ (ä¾‹å¦‚: 1,2,3) (é»˜è®¤: "1,2,3")
*   `-v, --values string`: åŒ…å«è¦ä¼ é€’ç»™ Lua ä»»åŠ¡çš„å€¼çš„ YAML æ–‡ä»¶è·¯å¾„

### `sloth-runner test`

æ‰§è¡Œä»»åŠ¡å·¥ä½œæµçš„ Lua æµ‹è¯•æ–‡ä»¶ã€‚

**ç”¨æ³•:** `sloth-runner test -w <workflow-file> -f <test-file>`

**æè¿°:**
`test` å‘½ä»¤é’ˆå¯¹å·¥ä½œæµè¿è¡ŒæŒ‡å®šçš„ Lua æµ‹è¯•æ–‡ä»¶ã€‚
åœ¨æµ‹è¯•æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `test` å’Œ `assert` æ¨¡å—æ¥éªŒè¯ä»»åŠ¡è¡Œä¸ºã€‚

**æ ‡å¿—:**

*   `-f, --file string`: Lua æµ‹è¯•æ–‡ä»¶è·¯å¾„ (å¿…éœ€)
*   `-w, --workflow string`: è¦æµ‹è¯•çš„ Lua å·¥ä½œæµæ–‡ä»¶è·¯å¾„ (å¿…éœ€)

### `sloth-runner repl`

å¯åŠ¨äº¤äº’å¼ REPL ä¼šè¯ã€‚

**ç”¨æ³•:** `sloth-runner repl [flags]`

**æè¿°:**
`repl` å‘½ä»¤å¯åŠ¨ä¸€ä¸ªäº¤äº’å¼ Read-Eval-Print Loopï¼Œå…è®¸æ‚¨æ‰§è¡Œ Lua ä»£ç å¹¶ä¸æ‰€æœ‰å†…ç½®çš„ sloth-runner æ¨¡å—è¿›è¡Œäº¤äº’ã€‚
æ‚¨å¯ä»¥é€‰æ‹©åŠ è½½ä¸€ä¸ªå·¥ä½œæµæ–‡ä»¶ä»¥ä½¿å…¶ä¸Šä¸‹æ–‡å¯ç”¨ã€‚

**æ ‡å¿—:**

*   `-f, --file string`: è¦åŠ è½½åˆ° REPL ä¼šè¯ä¸­çš„ Lua å·¥ä½œæµæ–‡ä»¶è·¯å¾„

### `sloth-runner version`

æ‰“å° sloth-runner çš„ç‰ˆæœ¬å·ã€‚

**ç”¨æ³•:** `sloth-runner version`

**æè¿°:**
æ‰€æœ‰è½¯ä»¶éƒ½æœ‰ç‰ˆæœ¬ã€‚è¿™æ˜¯ sloth-runner çš„ç‰ˆæœ¬ã€‚

### `sloth-runner template list`

åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ¨¡æ¿ã€‚

**ç”¨æ³•:** `sloth-runner template list`

**æè¿°:**
æ˜¾ç¤ºä¸€ä¸ªè¡¨æ ¼ï¼Œåˆ—å‡ºæ‰€æœ‰å¯ç”¨äº `new` å‘½ä»¤çš„æ¨¡æ¿ã€‚

### `sloth-runner new <group-name>`

ä»æ¨¡æ¿ç”Ÿæˆæ–°çš„ä»»åŠ¡å®šä¹‰æ–‡ä»¶ã€‚

**ç”¨æ³•:** `sloth-runner new <group-name> [flags]`

**æè¿°:**
`new` å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ ·æ¿ Lua ä»»åŠ¡å®šä¹‰æ–‡ä»¶ã€‚
æ‚¨å¯ä»¥ä»ä¸åŒçš„æ¨¡æ¿ä¸­é€‰æ‹©å¹¶æŒ‡å®šè¾“å‡ºæ–‡ä»¶ã€‚
è¿è¡Œ `sloth-runner template list` æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æ¨¡æ¿ã€‚

**å‚æ•°:**

*   `<group-name>`: è¦ç”Ÿæˆçš„ä»»åŠ¡ç»„çš„åç§°ã€‚

**æ ‡å¿—:**

*   `-o, --output string`: è¾“å‡ºæ–‡ä»¶è·¯å¾„ (é»˜è®¤: stdout)
*   `-t, --template string`: è¦ä½¿ç”¨çš„æ¨¡æ¿ã€‚è¯·å‚é˜… `template list` è·å–é€‰é¡¹ã€‚ (é»˜è®¤: "simple")
*   `--set key=value`: ä¼ é€’é”®å€¼å¯¹åˆ°æ¨¡æ¿ï¼Œç”¨äºåŠ¨æ€å†…å®¹ç”Ÿæˆã€‚

### `sloth-runner check dependencies`

æ£€æŸ¥æ‰€éœ€çš„å¤–éƒ¨ CLI å·¥å…·ã€‚

**ç”¨æ³•:** `sloth-runner check dependencies`

**æè¿°:**
éªŒè¯å„ç§æ¨¡å—ä½¿ç”¨çš„æ‰€æœ‰å¤–éƒ¨å‘½ä»¤è¡Œå·¥å…· (ä¾‹å¦‚: docker, aws, doctl) æ˜¯å¦å·²å®‰è£…å¹¶åœ¨ç³»ç»Ÿçš„ PATH ä¸­å¯ç”¨ã€‚

